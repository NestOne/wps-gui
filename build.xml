<?xml version="1.0" encoding="utf-8"?>
<project name="wpsbuilder">
    <property name="build" location="build"/>
    <target name="copy">
        <copy file="index.html" todir="${build}/${ant.project.name}"/>
        <copy todir="${build}/${ant.project.name}/dist">
            <fileset dir="dist"/>
        </copy>
        <copy todir="${build}/${ant.project.name}/components">
            <fileset dir="components"/>
        </copy>
        <copy todir="${build}/${ant.project.name}/vendor">
            <fileset dir="vendor"/>
        </copy>
        <copy todir="${build}/${ant.project.name}/docs/build/html">
          <fileset dir="docs/build/html"/>
        </copy>
    </target>
    <target name="docs">
      <exec executable="make">
        <arg line="-C docs -f Makefile html"/>
      </exec>
    </target>
    <target name="npm">
      <exec executable="npm">
        <arg line="install"/>
      </exec>
    </target>
    <target name="bower">
      <exec executable="bower">
        <arg line="install"/>
      </exec>
    </target>
    <target name="gulp">
      <exec executable="gulp">
      </exec>
    </target>
    <target name="war" depends="npm,bower,gulp,docs,copy">
        <war needxmlfile="false" destfile="${build}/${ant.project.name}.war">
            <fileset dir="${build}/${ant.project.name}"/>
        </war>
    </target>
    <target name="cleandocs">
      <exec executable="make">
        <arg line="-C docs -f Makefile clean"/>
      </exec>
    </target>
    <target name="clean" depends="cleandocs">
        <delete dir="${build}"/>
    </target>
</project>
